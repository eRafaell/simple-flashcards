{% extends 'base.html' %}

{% block content %}

<div class="d-flex border-bottom mb-4">
    <div class="col-sm-9 mr-auto p-2">
        <h3>{{deck_obj}}</h3>
        <p><small>{{deck_obj.description}}</small></p>
        <small><a href="{% url 'profile' deck_obj.created_by %}">{{deck_obj.created_by}}</a></small> |
        <small>created: {{deck_obj.created_date}}</small>
    </div>


    {% if user.is_authenticated and user == deck_obj.created_by or user.is_staff %}
    <div class="col-sm-1 p-2">
        <a class="btn btn-success" href="{% url 'edit_deck_name' deck_obj.id %}">Edit Deck</a>
    </div>
    <div class="col-sm-1 p-2">
        <a class="btn btn-primary align-right" href="{% url 'create_card_name' deck_obj.id %}">Add Card</a>
    </div>
        {% if card_obj %}
        <div class="col-sm-1 p-2">
            <a class="btn btn-info" href="{% url 'edit_card_name' deck_obj.id card_obj.id %}">Edit Card</a>
        </div>
        {% endif %}
    {% endif %}


</div>


    {% if card_obj %}
<div class="maincontainer">
        <div class="border border-secondary card w-50 mb-2 offset-1">
            <div class="card-body">
                <div class="card-front text-center">
                    <p>Front</p><hr>
                    <p class="card-text text-center">{{card_obj.front}}</p>
                </div>
                <div class="card-back text-center">
                    <p>Back</p><hr>
                    <p class="card-text text-center">{{card_obj.back}}</p>
                </div>
            </div>
        </div>
</div>


<nav aria-label="...">
    <ul class="pagination pagination-sm w-50 mb-2 offset-1 mx-auto">
        {% if card_obj.has_previous_card %}
        <li class="page-item">
        <a class="page-link" href="{% url 'view_deck_name' deck_obj.id %}?card={{card_obj.get_previous_card.id}}">Previous</a>
        </li>
        {% endif %}
        <li class="page-item active" aria-current="page">
            <span class="page-link">1<span class="sr-only">(current)</span></span>
        </li>
        {% if card_obj.has_next_card %}
        <li class="page-item">
        <a class="page-link" href="{% url 'view_deck_name' deck_obj.id %}?card={{card_obj.get_next_card.id}}">Next</a>
        </li>
        {% endif %}
    </ul>
</nav>

<script src="jquery.min.js"></script>
<script src="justFlipIt.min.js"></script>
<script>
    $('.card1').justFlipIt();
</script>

    {% else %}
        <p>No card found</p>
    {% endif %}
    <div class="button w-50">
        <div class="col-sm-1 p-2 my-5">
            <a class="btn btn-secondary" href="{% url 'view_cards_name' deck_obj.id %}">Back</a>
        </div>
    </div>

{% endblock %}